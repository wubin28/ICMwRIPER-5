# Implementation Plan: Update Context File for HTML Data Dashboard Addition

**Created**: 2025-10-11 14:06
**Status**: Pending approval

## Objective
Create an updated context file that reflects the addition of the `generate-html-data-dashboard` subcommand to the Ubuntu script, while preserving all existing accurate information.

## Files to Create/Modify
- Create: `/home/wzb/OOR/katas/ICMwRIPER-5/icm-context-2025-10-11--14-06.md` (new timestamped context file)
- Source: `/home/wzb/OOR/katas/ICMwRIPER-5/icm-context-2025-10-05--23-56.md` (old context to copy)

## Detailed Update Plan

### Update 1: Copy and Rename Context File
**Action**: Copy the old context file with current timestamp

**Command**:
```bash
cp icm-context-2025-10-05--23-56.md icm-context-2025-10-11--14-06.md
```

### Update 2: Executive Summary - Current Status (Line 7-8)
**Old text**:
```
**Current Status**: Dual platform implementation completed - Ubuntu and macOS versions fully functional
```

**New text**:
```
**Current Status**: Dual platform implementation completed - Ubuntu enhanced with HTML data dashboard support, macOS version fully functional
```

### Update 3: Executive Summary - Quick Capabilities (Lines 19-24)
**Old text**:
```
**Quick Capabilities**:
- Generate new projects with template files from GitHub
- Create timestamped story files
- Create timestamped bubble files with automatic story reference updates
- Create matched story-bubble file pairs in a single command
- **NEW**: Full cross-platform compatibility between Ubuntu and macOS
```

**New text**:
```
**Quick Capabilities**:
- Generate new projects with template files from GitHub
- Generate HTML data dashboard projects with additional data files
- Create timestamped story files
- Create timestamped bubble files with automatic story reference updates
- Create matched story-bubble file pairs in a single command
- Full cross-platform compatibility between Ubuntu and macOS
```

### Update 4: Add HTML Data Dashboard Business Requirement (After line 62)
**Location**: After "Combined Story-Bubble Creation" section

**Insert**:
```markdown
### HTML Data Dashboard Project Generation

**Requirement**: Users need to quickly bootstrap new data dashboard projects with both ICMwRIPER-5 templates and data files

**Solution**: `icmwriper-5-for-ubuntu generate-html-data-dashboard <project-name>` command

**What it provides**: Downloads 6 files from GitHub repository:
- 4 standard template files (same as `generate` command)
- 2 additional data dashboard files from subdirectory

**Files downloaded**:
- `icm-bubble-template.md`
- `icm-story-template.md`
- `icmwriper-5.md`
- `README.md` (renamed to `icmwriper-5-README.md`)
- `first-80-rows-agentic_ai_performance_dataset_20250622.xlsx`
- `.gitignore`

**Key behavior**: All files placed in project root directory (flattened structure)

**Use case**: Specialized for Python/HTML/CSS/JavaScript data visualization projects
```

### Update 5: Script Architecture - Subcommands (Line 113)
**Old text**:
```
**Supported subcommands**: `generate`, `story`, `bubble`, `snb`
```

**New text**:
```
**Supported subcommands**: `generate`, `generate-html-data-dashboard`, `story`, `bubble`, `snb`
```

### Update 6: Add Design Decision #8 (Before Implementation Details section)
**Location**: After existing design decisions, before "## Implementation Details"

**Insert**:
```markdown
#### Decision 8: HTML Data Dashboard as separate command

**Rationale**: Keep `generate` simple for general use while providing specialized command for data projects

**Implementation**: New `generate-html-data-dashboard` subcommand with extended file list

**File strategy**:
- Downloads 4 root files using ROOT_FILES array
- Downloads 2 subdirectory files using SUBDIR_FILES array with full paths
- Uses `basename` to extract filenames for target location

**Benefits**:
- Clear separation of concerns
- Users can choose appropriate command for their project type
- No breaking changes to existing `generate` command
```

### Update 7: Implementation Details - Script Size (Line 201)
**Old text**:
```
**Ubuntu script**: `icmwriper-5-for-ubuntu` (167 lines)
```

**New text**:
```
**Ubuntu script**: `icmwriper-5-for-ubuntu` (223 lines)
```

### Update 8: Add generate-html-data-dashboard Subcommand Documentation (After snb section)
**Location**: After "snb Subcommand" section, before "## Usage Examples"

**Insert**:
```markdown
### generate-html-data-dashboard Subcommand

**Functionality**:
- Creates new project directory
- Downloads 6 template and data files from GitHub
- Renames `README.md` to `icmwriper-5-README.md`

**Implementation approach**:
1. Validate that project directory doesn't already exist
2. Create directory with `mkdir`
3. Loop through ROOT_FILES array (4 files), downloading each with `curl -f -sS -o`
4. Loop through SUBDIR_FILES array (2 files with subdirectory paths):
   - Extract filename using `basename`
   - Download from subdirectory path
   - Save to project root with extracted filename
5. If any download fails, remove entire directory and exit
6. Rename README file with `mv`
7. Output success message

**Key validation**:
- Directory existence check before creation
- Curl failure detection with cleanup
- Exactly 2 arguments required

**Key technical details**:
- ROOT_FILES: `("icm-bubble-template.md" "icm-story-template.md" "icmwriper-5.md" "README.md")`
- SUBDIR_FILES: `("for-py-html-css-js-by-data-dashboard/first-80-rows-agentic_ai_performance_dataset_20250622.xlsx" "for-py-html-css-js-by-data-dashboard/.gitignore")`
- Uses `basename` to flatten directory structure
- All 6 files end up in project root directory
```

### Update 9: Add Usage Example 1b (After Example 1)
**Location**: After "Example 1: Creating a new project"

**Insert**:
```markdown
### Example 1b: Creating a data dashboard project

**Ubuntu**:
```bash
$ icmwriper-5-for-ubuntu generate-html-data-dashboard my-dashboard-kata
Success: Project 'my-dashboard-kata' created with ICMwRIPER-5 template files and HTML data dashboard resources.
```

**Result**: Creates directory with 6 files (4 templates + 2 data files)

**macOS**: Command not yet available (Ubuntu only)
```

### Update 10: Context for AI Tools - Opening Paragraph (Line 371)
**Old text**:
```
This context was updated after completing the macOS conversion project (2025-10-05). Both Ubuntu and macOS scripts are fully functional and tested. When continuing development:
```

**New text**:
```
This context was updated after adding the `generate-html-data-dashboard` subcommand (2025-10-11). Both Ubuntu and macOS scripts are fully functional and tested, with Ubuntu now supporting data dashboard project generation. When continuing development:
```

### Update 11: Replace Latest Development Section (Lines 391-405)
**Old section**:
```markdown
## Latest Development (2025-10-05)

**Requirement**: Convert Ubuntu script to macOS compatibility while preserving all functionality

**Implementation completed**:
- Created `icmwriper-5-for-macos` from `icmwriper-5-for-ubuntu`
- Updated usage message to reference correct script name
- Modified sed commands for macOS compatibility:
  - Added `-E` flag for extended regex support
  - Changed quantifier syntax from `\{n\}` to `{n}`
  - Maintained `-i ''` for in-place editing
- All 4 subcommands tested and verified functional on macOS Sequoia 15.6.1
- Story reference replacement confirmed working in bubble files

**Key technical challenge resolved**: macOS sed doesn't support basic regex quantifiers `\{n\}` by default, requiring extended regex mode and syntax updates.
```

**New section**:
```markdown
## Latest Development (2025-10-11)

**Requirement**: Add `generate-html-data-dashboard` subcommand to Ubuntu script for specialized data visualization projects

**Implementation completed**:
- Added new subcommand `generate-html-data-dashboard` (lines 164-218, 55 lines)
- Updated usage message to include new command
- Updated error messages for unknown commands
- Downloads 6 files total: 4 root templates + 2 data dashboard files
- Data files downloaded from subdirectory: `for-py-html-css-js-by-data-dashboard/`
- Files: `first-80-rows-agentic_ai_performance_dataset_20250622.xlsx` and `.gitignore`
- All files placed in project root (flattened structure using `basename`)
- All existing commands remain unchanged and fully functional
- Comprehensive testing completed successfully

**Key technical implementation**:
- Used separate arrays for root files (ROOT_FILES) and subdirectory files (SUBDIR_FILES)
- Applied `basename` function to extract filenames from subdirectory paths
- Maintained identical error handling and cleanup patterns as existing `generate` command

**Script growth**: 167 lines → 223 lines (+56 lines)
```

### Update 12: Context Metadata Section (Lines 407-428)
**Old text**:
```
**Created**: 2025-10-03 22:01

**Updated**: 2025-10-05 23:56

**Iterations completed**: 6 (including macOS conversion)

**Script versions**:
- Ubuntu: 167 lines, 4 subcommands
- macOS: 167 lines, 4 subcommands (with platform-specific modifications)

**Last updated**: After completing macOS conversion and cross-platform testing

**Previous context**: `icm-context-2025-10-03--22-01.md`

**Current story-bubble pair**: `icm-story-2025-10-05--22-48.md` / `icm-bubble-2025-10-05--22-48.md`

**Repository**: `https://github.com/wubin28/ICMwRIPER-5`

**Status**: Both Ubuntu and macOS implementations fully functional and tested
```

**New text**:
```
**Created**: 2025-10-03 22:01

**Updated**: 2025-10-11 14:06

**Iterations completed**: 7 (including HTML data dashboard addition)

**Script versions**:
- Ubuntu: 223 lines, 5 subcommands
- macOS: 167 lines, 4 subcommands (HTML dashboard command not yet ported)

**Last updated**: After adding `generate-html-data-dashboard` subcommand to Ubuntu script

**Previous context**: `icm-context-2025-10-05--23-56.md`

**Current story-bubble pair**: `icm-story-2025-10-11--09-54.md` / `icm-bubble-2025-10-11--09-54.md`

**Implementation todo**: `todo-2025-10-11--12-14.md`

**Repository**: `https://github.com/wubin28/ICMwRIPER-5`

**Status**: Ubuntu enhanced with data dashboard support; macOS version stable with 4 subcommands
```

---

## IMPLEMENTATION CHECKLIST:

1. [Specific action] Copy old context file with current timestamp `icm-context-2025-10-11--14-06.md`
2. [Specific action] Update Executive Summary - Current Status (line 7-8)
3. [Specific action] Update Executive Summary - Quick Capabilities (lines 19-24)
4. [Specific action] Add new Business Requirement section for HTML Data Dashboard (after line 62)
5. [Specific action] Update Script Architecture - Supported subcommands (line 113)
6. [Specific action] Add Key Design Decision #8 before Implementation Details section (after line 196)
7. [Specific action] Update Implementation Details - script line count (line 201)
8. [Specific action] Add generate-html-data-dashboard subcommand documentation (after line 301)
9. [Specific action] Add Usage Example 1b for data dashboard command (after line 318)
10. [Specific action] Update Context for AI Tools section opening paragraph (line 371)
11. [Specific action] Replace Latest Development section with 2025-10-11 updates (lines 391-405)
12. [Specific action] Update Context Metadata section (lines 407-428)

## Implementation Notes

1. **Surgical update approach**: Only modify sections that changed, preserve all other content
2. **Line numbers are approximate**: Actual line numbers may shift as content is added
3. **Verification**: After all updates, verify the context file reads coherently from start to finish
4. **Format consistency**: Maintain existing markdown formatting style

---

## REVIEW SECTION

**Implementation Completed**: 2025-10-11 14:15

### Summary of Changes

All 12 planned updates were implemented exactly as specified in the plan:

1. ✅ Copied old context file with timestamp `icm-context-2025-10-11--14-06.md`
2. ✅ Updated Executive Summary - Current Status
3. ✅ Updated Executive Summary - Quick Capabilities
4. ✅ Added new Business Requirement section for HTML Data Dashboard
5. ✅ Updated Script Architecture - Supported subcommands
6. ✅ Added Key Design Decision #8
7. ✅ Updated Implementation Details - script line count
8. ✅ Added generate-html-data-dashboard subcommand documentation
9. ✅ Added Usage Example 1b
10. ✅ Updated Context for AI Tools section opening paragraph
11. ✅ Replaced Latest Development section with 2025-10-11 updates
12. ✅ Updated Context Metadata section

### Update Strategy

**Approach Used**: Surgical update (Option 2 from INNOVATE mode)

**Rationale**: Preserved well-written existing content while making targeted updates only to sections affected by the new `generate-html-data-dashboard` subcommand

### Sections Updated

**Modified Sections**:
- Executive Summary (status and capabilities)
- Business Requirements (added HTML Data Dashboard section)
- Script Architecture (updated subcommand count)
- Key Design Decisions (added decision #8)
- Implementation Details (updated script size, added new subcommand docs)
- Usage Examples (added example 1b)
- Context for AI Tools (updated opening)
- Latest Development (replaced entire section)
- Context Metadata (updated all fields)

**Preserved Sections**:
- Technical Architecture
- File Naming Conventions
- All existing subcommand documentation (generate, story, bubble, snb)
- Design decisions 1-7
- Platform-specific technical details

### File Statistics

**Context File**: `icm-context-2025-10-11--14-06.md`
**Total Lines**: 517 lines
**Content Added**: ~100 lines (new sections and examples)
**Content Modified**: ~15 lines (updated metadata and status)
**Content Preserved**: ~400 lines (unchanged existing content)

### Accuracy Verification

✅ **Current Status**: Reflects Ubuntu enhancement with HTML data dashboard support
✅ **Capabilities**: Lists 6 capabilities including new data dashboard generation
✅ **Business Requirements**: Documents all 5 requirement areas
✅ **Subcommand Count**: Correctly shows 5 subcommands for Ubuntu, 4 for macOS
✅ **Script Size**: Accurately reflects 223 lines for Ubuntu
✅ **Latest Development**: Documents the 2025-10-11 HTML dashboard addition
✅ **Metadata**: All timestamps, file references, and iteration counts updated correctly

### Compliance with Plan

✅ **100% compliance** - All updates match the plan exactly:
- No deviations from planned changes
- No creative additions beyond the plan
- All line number estimates were reasonably accurate
- Surgical update approach successfully applied
- All existing content properly preserved

### Context File Quality

**Completeness**: Context file comprehensively documents all 5 subcommands
**Accuracy**: All technical details match the actual implementation
**Clarity**: New sections follow existing documentation patterns
**Usability**: AI tools can use this context to understand current project state
**Maintainability**: Clear structure allows future updates

### Final Status

**Status**: ✅ CONTEXT UPDATE COMPLETE
**Result**: Updated context file successfully created at `icm-context-2025-10-11--14-06.md`
**Reflects**: Ubuntu script with 5 subcommands including HTML data dashboard support
**Ready For**: Use in new AI sessions or for handing off to other AI tools
